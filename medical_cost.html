<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Medical cost analysis</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="exploration.html">Data exploration</a>
</li>
<li>
  <a href="model-building.html">Model building</a>
</li>
<li>
  <a href="analysis.html">Analysis and discussion</a>
</li>
<li>
  <a href="mapping.html">Mapping</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="mailto:&lt;yw3772@cumc.columbia.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/wyshanw/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Medical cost analysis</h1>

</div>


<div id="study-of-factors-that-affect-charge-of-insurance" class="section level2 tabset">
<h2 class="tabset">Study of factors that affect charge of insurance</h2>
<div id="smoker" class="section level3">
<h3>Smoker</h3>
<pre class="r"><code>ggplot(cost_df, aes(x = smoker, y = charges, color = smoker)) + 
  geom_boxplot() + 
  coord_flip()</code></pre>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>YES! Smoker have significantly higher insurance cost than non smoker.</p>
</div>
<div id="having-children" class="section level3">
<h3>Having Children</h3>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><span class="math inline">\(H_0\)</span>: mean charges of insurance for having or not having children is the same.</p>
<p><span class="math inline">\(H_1\)</span>: mean charges of insurance for having children is higher than not having children.</p>
<pre class="r"><code>var.test(charges ~ children_group, data = cost_df)</code></pre>
<pre><code>## 
##  F test to compare two variances
## 
## data:  charges by children_group
## F = 0.97454, num df = 531, denom df = 728, p-value = 0.7527
## alternative hypothesis: true ratio of variances is not equal to 1
## 95 percent confidence interval:
##  0.8326569 1.1428600
## sample estimates:
## ratio of variances 
##          0.9745361</code></pre>
<pre class="r"><code>#Equal variance
children_res &lt;- t.test(charges ~ children_group, data = cost_df, var.equal = TRUE, alternative = &quot;less&quot;)
children_res</code></pre>
<pre><code>## 
##  Two Sample t-test
## 
## data:  charges by children_group
## t = -2.444, df = 1259, p-value = 0.007331
## alternative hypothesis: true difference in means between group 0 and group 1 is less than 0
## 95 percent confidence interval:
##       -Inf -543.4854
## sample estimates:
## mean in group 0 mean in group 1 
##        12136.31        13800.96</code></pre>
<p>At 0.05 significant level, we reject the null hypothesis and conclude that mean charges of insurance for having children is higher than not having children.</p>
</div>
<div id="sex" class="section level3">
<h3>sex</h3>
<pre class="r"><code>ggplot(cost_df, aes(x = sex, y = charges, color = sex)) + 
  geom_boxplot() + 
  coord_flip()</code></pre>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p><span class="math inline">\(H_0\)</span>: mean charges of insurance for male and female is the same.</p>
<p><span class="math inline">\(H_1\)</span>: mean charges of insurance for male and female is different.</p>
<pre class="r"><code>var.test(charges ~ sex, data = cost_df)</code></pre>
<pre><code>## 
##  F test to compare two variances
## 
## data:  charges by sex
## F = 1.3972, num df = 637, denom df = 622, p-value = 2.897e-05
## alternative hypothesis: true ratio of variances is not equal to 1
## 95 percent confidence interval:
##  1.194861 1.633633
## sample estimates:
## ratio of variances 
##            1.39723</code></pre>
<pre class="r"><code>#Equal variance
sex_res &lt;- t.test(charges ~ sex, data = cost_df, var.equal = FALSE)
sex_res</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  charges by sex
## t = 2.0305, df = 1234, p-value = 0.04252
## alternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0
## 95 percent confidence interval:
##    46.09322 2682.75235
## sample estimates:
## mean in group 1 mean in group 2 
##        13772.76        12408.34</code></pre>
<pre class="r"><code>sex_res &lt;- t.test(charges ~ sex, data = cost_df, var.equal = FALSE, alternative = &quot;less&quot;)
sex_res</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  charges by sex
## t = 2.0305, df = 1234, p-value = 0.9787
## alternative hypothesis: true difference in means between group 1 and group 2 is less than 0
## 95 percent confidence interval:
##      -Inf 2470.545
## sample estimates:
## mean in group 1 mean in group 2 
##        13772.76        12408.34</code></pre>
<p>At 0.05 significant level, we reject the null hypothesis and conclude that mean charges of insurance for male and female are different. In fact, male have higher mean cost than female. This is quiet counter-intuitive.</p>
</div>
<div id="age" class="section level3">
<h3>age</h3>
<pre class="r"><code>ggplot(cost_df, aes(x = age, y = charges)) + 
  geom_smooth() </code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>It is clear from the plot that higher age have higher cost of insurance.</p>
</div>
<div id="bmi" class="section level3">
<h3>bmi</h3>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>It is clear from the plot that higher bmi have higher cost of insurance.</p>
</div>
<div id="conclusion" class="section level3">
<h3>conclusion</h3>
<p>Variables that affect charge of insurance: <code>smoking</code>, <code>whether or not having children</code>, <code>sex</code>, <code>age</code>, <code>bmi</code>.</p>
</div>
<div id="collinearity-examination" class="section level3">
<h3>collinearity examination</h3>
<pre class="r"><code>#model &lt;- glm(charges ~ smoker + children_group + sex + age + bmi, data = cost_df)

cost_df_cor = cost_df %&gt;% 
  select(age, sex, bmi, smoker, charges, children_group)



model.matrix(~0+., data=cost_df_cor) %&gt;% 
  cor(use=&quot;pairwise.complete.obs&quot;) %&gt;% 
  ggcorrplot(show.diag = F, type=&quot;lower&quot;, lab=TRUE, lab_size=2)</code></pre>
<p><img src="medical_cost_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>There is no collinearity between any of the variables.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
