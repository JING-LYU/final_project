<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data exploration</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="exploration.html">Data exploration</a>
</li>
<li>
  <a href="medical_cost.html">Model building</a>
</li>
<li>
  <a href="discussion.html">Discussion</a>
</li>
<li>
  <a href="mapping.html">Mapping</a>
</li>
<li>
  <a href="report.html">Report</a>
</li>
<li>
  <a href="https://yiqunjin.shinyapps.io/shiny_dashboard/">Shiny Dashboard</a>
</li>
<li>
  <a href="mailto:&lt;yw3772@cumc.columbia.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/wyshanw/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Data exploration</h1>

</div>


<pre class="r"><code>ataset_basic = read_csv(&quot;data/dataset_basic.csv&quot;)

dataset_basic = read_csv(&quot;data/dataset_basic.csv&quot;) %&gt;% 
  mutate(
         child = factor(child,levels = c(1,2),labels = c(&quot;yes&quot;,&quot;no&quot;)),
         sex = factor(sex,labels = c(&quot;male&quot;,&quot;female&quot;)),
         insure = factor(insure,levels = c(1,2,3,4,5,6,7),labels = c(&quot;Employer&quot;,&quot;Self-purchase&quot;,&quot;Medicare&quot;, &quot;Medicaid/Family Health+&quot;, &quot;Milit/CHAMPUS/Tricare&quot;, &quot;COBRA/Other&quot;, &quot;Uninsured&quot;)),
         smoker = factor(smoker,levels = c(1,2,3),labels = c(&quot;never&quot;,&quot;current&quot;,&quot;former&quot;)),
         agegroup = factor(agegroup,ordered = TRUE,labels = c(&quot;18-24yrs&quot;,&quot;25-44yrs&quot;, &quot;45-64yrs&quot;, &quot;65+yrs&quot;))
         ) %&gt;% 
  select(insure,agegroup,smoker,bmi,child,sex)</code></pre>
<div id="explore-relationship-between-insurance-and-target-variables" class="section level2">
<h2>3. Explore relationship between <code>insurance</code> and target variables</h2>
<p>In this step, we want to explore more about the relationship between insurance and key variables, including smoking, age, have children or not and BMI. We start by plotting distribution graphs to see the pattern between each groups. And then we conduct statistical tests to evaluate the association and similarity between them.</p>
<p><br></p>
<div id="distributions" class="section level3 tabset">
<h3 class="tabset">Distributions</h3>
<div id="smoking" class="section level4">
<h4>Smoking</h4>
<pre class="r"><code>analyse_smoke_insurancetype = 
  dataset_basic %&gt;%
  drop_na(smoker,insure) %&gt;% 
  group_by(smoker,insure) %&gt;% 
  summarize(n = n()) %&gt;% 
  mutate(insure = fct_reorder(insure,n))
  
analyse_smoke_insurancetype %&gt;% 
  ggplot(aes(x =smoker , y = n, fill = insure)) + 
  geom_bar(stat = &quot;identity&quot;,position = &quot;dodge&quot;) +
    labs(
      x = &#39;smoking group &#39;,
      y = &#39;counts&#39;,
      title = &#39;The distribution of insurance in different smoking group &#39;)</code></pre>
<p><img src="hoho_files/figure-html/unnamed-chunk-2-1.png" width="90%" /></p>
</div>
<div id="age" class="section level4">
<h4>Age</h4>
<pre class="r"><code>analyse_agegroup_insurancetype = 
  dataset_basic %&gt;%
  drop_na(agegroup,insure) %&gt;% 
  group_by(agegroup,insure) %&gt;% 
  summarize(n = n()) %&gt;% 
  mutate(insure = fct_reorder(insure,n))
  
analyse_agegroup_insurancetype %&gt;% 
  ggplot(aes(x = agegroup, y = n, fill = insure  )) + 
  geom_bar(stat = &quot;identity&quot;,position = &quot;dodge&quot;) +
    labs(
      x = &#39;agegroup&#39;,
      y = &#39;counts&#39;,
      title = &#39;The distribution of insurance type in differnt agegroup&#39;)</code></pre>
<p><img src="hoho_files/figure-html/unnamed-chunk-3-1.png" width="90%" /> For person younger than 65 years old, people tend to get insurance as age increase. Specifically, for those age in the range of 25-64 years old, high proportion of them get <strong>employer</strong> insurance since they are in working age.</p>
<p>For person older than 65 years old, most of them get <strong>Medicare</strong> since Medicare is only provided for people above 65 years old.</p>
</div>
<div id="have-children-or-not" class="section level4">
<h4>Have children or not</h4>
<pre class="r"><code>analyse_children_insurancetype = 
  dataset_basic %&gt;%
  drop_na(child,insure)  %&gt;% 
  group_by(child,insure) %&gt;% 
  summarize(n = n())%&gt;% 
  mutate(insure = fct_reorder(insure,n))
  
analyse_children_insurancetype %&gt;% 
  ggplot(aes(x = child, y = n, fill = insure )) + 
  geom_bar(stat = &quot;identity&quot;,position = &quot;dodge&quot;) +
    labs(
      x = &#39;child&#39;,
      y = &#39;counts&#39;,
      title = &#39;The distribution of insurance type in groups of people with or without children&#39;)</code></pre>
<p><img src="hoho_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<p>We found that for those without children, a larger proportion of them get <strong>Medicare</strong> comparing to those with children.</p>
</div>
<div id="bmi" class="section level4">
<h4>BMI</h4>
<pre class="r"><code>analyse_bmi_insurancetype = 
  dataset_basic %&gt;%
  drop_na(bmi,insure) 
  
  
  
analyse_bmi_insurancetype %&gt;% 
  ggplot(aes(x = insure, y = bmi,fill = insure)) + 
  geom_boxplot(alpha=0.6) +
    theme(legend.position=&quot;none&quot;) +
    scale_fill_brewer(palette=&quot;Dark2&quot;)+
    labs(
      x = &#39;insurance&#39;,
      y = &#39;bmi&#39;,
      title = &#39;The distribution of bmi in groups having different insurance type&#39;) +
  coord_flip()</code></pre>
<p><img src="hoho_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
<p>We did not observe significant difference between each group.</p>
<p><br></p>
</div>
</div>
<div id="statistical-test" class="section level3 tabset">
<h3 class="tabset">Statistical test</h3>
<div id="smoking-1" class="section level4">
<h4>Smoking</h4>
<div id="chi-quare-test-between-insurance-type-and-smoking" class="section level5">
<h5><strong>Chi-quare test between insurance type and smoking</strong></h5>
<p><span class="math inline">\(H_0\)</span> : insurance type and smoking are independent, there is no relationship between the two categorical variables.</p>
<p><span class="math inline">\(H_1\)</span> : insurance type and smoking are dependent, there is a relationship between the two categorical variables.</p>
<p><em>Test result:</em></p>
<pre class="r"><code>dat = 
  dataset_basic %&gt;%
  drop_na(smoker,insure) </code></pre>
<p><img src="hoho_files/figure-html/my-chunk1-1.png" width="90%" /></p>
<p>We reject <span class="math inline">\(H_0\)</span> and then conclude that insurance type and smoking are dependent.</p>
</div>
</div>
<div id="age-1" class="section level4">
<h4>Age</h4>
<div id="chi-quare-test-between-insurance-type-and-age" class="section level5">
<h5><strong>Chi-quare test between insurance type and age</strong></h5>
<p><span class="math inline">\(H_0\)</span> : insurance type and age are independent, there is no relationship between the two categorical variables.</p>
<p><span class="math inline">\(H_1\)</span> : insurance type and age are dependent, there is a relationship between the two categorical variables.</p>
<p><em>Test result:</em></p>
<pre class="r"><code>dat = 
  dataset_basic %&gt;%
  drop_na(agegroup,insure) </code></pre>
<p><img src="hoho_files/figure-html/my-chunk2-1.png" width="90%" /></p>
<p>We reject <span class="math inline">\(H_0\)</span> and then conclude that insurance type and age are dependent.</p>
</div>
</div>
<div id="have-children-or-not-1" class="section level4">
<h4>Have children or not</h4>
<div id="chi-quare-test-between-insurance-type-and-children" class="section level5">
<h5><strong>Chi-quare test between insurance type and children</strong></h5>
<p><span class="math inline">\(H_0\)</span> : insurance type and have children or not are independent, there is no relationship between the two categorical variables.</p>
<p><span class="math inline">\(H_1\)</span> : insurance type and have children or not are dependent, there is a relationship between the two categorical variables.</p>
<p><em>Test result:</em></p>
<pre class="r"><code>#test_data_smoke_insurancetype = analyse_smoke_insurancetype %&gt;% 
#  pivot_wider(
#  names_from = &quot;insure&quot;, 
#  values_from = &quot;n&quot;)

#test_data_smoke_insurancetype %&gt;% knitr::kable()
#chisq.test(test_data_smoke_insurancetype[-1])

dat = 
  dataset_basic %&gt;%
  drop_na(child,insure)</code></pre>
<p><img src="hoho_files/figure-html/my-chunk3-1.png" width="90%" /></p>
<p>We reject <span class="math inline">\(H_0\)</span> and then conclude that insurance type and children are dependent.</p>
</div>
</div>
<div id="bmi-1" class="section level4">
<h4>BMI</h4>
<div id="anova-test-between-insurance-type-and-bmi" class="section level5">
<h5><strong>ANOVA test between insurance type and BMI</strong></h5>
<p><span class="math inline">\(H_0\)</span> : The mean of BMI in each insurance type groups are the same</p>
<p><span class="math inline">\(H_1\)</span> : At least two means of BMI in all insurance type groups are different</p>
<p><em>Test result:</em></p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">df</th>
<th align="right">sumsq</th>
<th align="right">meansq</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">insure</td>
<td align="right">6</td>
<td align="right">2435.492</td>
<td align="right">405.9154</td>
<td align="right">10.88312</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Residuals</td>
<td align="right">26917</td>
<td align="right">1003942.322</td>
<td align="right">37.2977</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p><img src="hoho_files/figure-html/my-chunk6-1.png" width="90%" /></p>
<p>According to the ANOVA test, we reject <span class="math inline">\(H_0\)</span> and conclude At least two means of BMI in all insurance type groups are different. Detailed information of the difference in each group can be seen on the above image.</p>
<p><br></p>
</div>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
